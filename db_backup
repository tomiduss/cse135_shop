--
-- PostgreSQL database dump
--

-- Dumped from database version 9.2.4
-- Dumped by pg_dump version 9.2.4
-- Started on 2013-05-17 15:40:49 PDT

SET statement_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SET check_function_bodies = false;
SET client_min_messages = warning;

--
-- TOC entry 2245 (class 1262 OID 12270)
-- Dependencies: 2244
-- Name: postgres; Type: COMMENT; Schema: -; Owner: postgres
--

COMMENT ON DATABASE postgres IS 'default administrative connection database';


--
-- TOC entry 178 (class 3079 OID 11995)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2248 (class 0 OID 0)
-- Dependencies: 178
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


--
-- TOC entry 177 (class 3079 OID 16384)
-- Name: adminpack; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS adminpack WITH SCHEMA pg_catalog;


--
-- TOC entry 2249 (class 0 OID 0)
-- Dependencies: 177
-- Name: EXTENSION adminpack; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION adminpack IS 'administrative functions for PostgreSQL';


SET search_path = public, pg_catalog;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 174 (class 1259 OID 16706)
-- Name: cart; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE cart (
    id integer NOT NULL,
    userid integer,
    productsku integer
);


ALTER TABLE public.cart OWNER TO postgres;

--
-- TOC entry 173 (class 1259 OID 16704)
-- Name: cart_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE cart_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.cart_id_seq OWNER TO postgres;

--
-- TOC entry 2250 (class 0 OID 0)
-- Dependencies: 173
-- Name: cart_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE cart_id_seq OWNED BY cart.id;


--
-- TOC entry 171 (class 1259 OID 16681)
-- Name: category; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE category (
    id integer NOT NULL,
    category_name text NOT NULL,
    description text
);


ALTER TABLE public.category OWNER TO postgres;

--
-- TOC entry 170 (class 1259 OID 16679)
-- Name: category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE category_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.category_id_seq OWNER TO postgres;

--
-- TOC entry 2251 (class 0 OID 0)
-- Dependencies: 170
-- Name: category_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE category_id_seq OWNED BY category.id;


--
-- TOC entry 172 (class 1259 OID 16690)
-- Name: product; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE product (
    sku integer NOT NULL,
    name text NOT NULL,
    list_price integer NOT NULL,
    categoryid integer NOT NULL,
    CONSTRAINT positive_price CHECK ((list_price >= 0))
);


ALTER TABLE public.product OWNER TO postgres;

--
-- TOC entry 176 (class 1259 OID 16724)
-- Name: purchase; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE purchase (
    id integer NOT NULL,
    userid integer,
    productsku integer,
    purchase_date timestamp without time zone NOT NULL
);


ALTER TABLE public.purchase OWNER TO postgres;

--
-- TOC entry 175 (class 1259 OID 16722)
-- Name: purchase_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE purchase_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.purchase_id_seq OWNER TO postgres;

--
-- TOC entry 2252 (class 0 OID 0)
-- Dependencies: 175
-- Name: purchase_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE purchase_id_seq OWNED BY purchase.id;


--
-- TOC entry 169 (class 1259 OID 16667)
-- Name: shop_user; Type: TABLE; Schema: public; Owner: postgres; Tablespace: 
--

CREATE TABLE shop_user (
    id integer NOT NULL,
    username text NOT NULL,
    owner boolean NOT NULL,
    age integer NOT NULL,
    state text,
    CONSTRAINT positive_age CHECK ((age >= 0))
);


ALTER TABLE public.shop_user OWNER TO postgres;

--
-- TOC entry 168 (class 1259 OID 16665)
-- Name: shop_user_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE shop_user_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.shop_user_id_seq OWNER TO postgres;

--
-- TOC entry 2253 (class 0 OID 0)
-- Dependencies: 168
-- Name: shop_user_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: postgres
--

ALTER SEQUENCE shop_user_id_seq OWNED BY shop_user.id;


--
-- TOC entry 2212 (class 2604 OID 16709)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY cart ALTER COLUMN id SET DEFAULT nextval('cart_id_seq'::regclass);


--
-- TOC entry 2210 (class 2604 OID 16684)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY category ALTER COLUMN id SET DEFAULT nextval('category_id_seq'::regclass);


--
-- TOC entry 2213 (class 2604 OID 16727)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY purchase ALTER COLUMN id SET DEFAULT nextval('purchase_id_seq'::regclass);


--
-- TOC entry 2208 (class 2604 OID 16670)
-- Name: id; Type: DEFAULT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY shop_user ALTER COLUMN id SET DEFAULT nextval('shop_user_id_seq'::regclass);


--
-- TOC entry 2237 (class 0 OID 16706)
-- Dependencies: 174
-- Data for Name: cart; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY cart (id, userid, productsku) FROM stdin;
3	1	22
\.


--
-- TOC entry 2254 (class 0 OID 0)
-- Dependencies: 173
-- Name: cart_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('cart_id_seq', 3, true);


--
-- TOC entry 2234 (class 0 OID 16681)
-- Dependencies: 171
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY category (id, category_name, description) FROM stdin;
3	Category 1	Desc
4	Category 2	Desc
5	Category 3	Desc
6	Category 4	Desc
7	Category 5	Desc
\.


--
-- TOC entry 2255 (class 0 OID 0)
-- Dependencies: 170
-- Name: category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('category_id_seq', 7, true);


--
-- TOC entry 2235 (class 0 OID 16690)
-- Dependencies: 172
-- Data for Name: product; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY product (sku, name, list_price, categoryid) FROM stdin;
311	Product 1	99	5
99	Product 2	50	3
22	Product 3	11	7
\.


--
-- TOC entry 2239 (class 0 OID 16724)
-- Dependencies: 176
-- Data for Name: purchase; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY purchase (id, userid, productsku, purchase_date) FROM stdin;
\.


--
-- TOC entry 2256 (class 0 OID 0)
-- Dependencies: 175
-- Name: purchase_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('purchase_id_seq', 1, true);


--
-- TOC entry 2232 (class 0 OID 16667)
-- Dependencies: 169
-- Data for Name: shop_user; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY shop_user (id, username, owner, age, state) FROM stdin;
1	magnus	t	24	CA
2	tomi	f	31	IL
\.


--
-- TOC entry 2257 (class 0 OID 0)
-- Dependencies: 168
-- Name: shop_user_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('shop_user_id_seq', 2, true);


--
-- TOC entry 2223 (class 2606 OID 16711)
-- Name: cart_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY cart
    ADD CONSTRAINT cart_pkey PRIMARY KEY (id);


--
-- TOC entry 2219 (class 2606 OID 16689)
-- Name: category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY category
    ADD CONSTRAINT category_pkey PRIMARY KEY (id);


--
-- TOC entry 2221 (class 2606 OID 16698)
-- Name: product_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY product
    ADD CONSTRAINT product_pkey PRIMARY KEY (sku);


--
-- TOC entry 2225 (class 2606 OID 16729)
-- Name: purchase_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY purchase
    ADD CONSTRAINT purchase_pkey PRIMARY KEY (id);


--
-- TOC entry 2215 (class 2606 OID 16676)
-- Name: shop_user_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY shop_user
    ADD CONSTRAINT shop_user_pkey PRIMARY KEY (id);


--
-- TOC entry 2217 (class 2606 OID 16678)
-- Name: shop_user_username_key; Type: CONSTRAINT; Schema: public; Owner: postgres; Tablespace: 
--

ALTER TABLE ONLY shop_user
    ADD CONSTRAINT shop_user_username_key UNIQUE (username);


--
-- TOC entry 2228 (class 2606 OID 16717)
-- Name: cart_productsku_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY cart
    ADD CONSTRAINT cart_productsku_fkey FOREIGN KEY (productsku) REFERENCES product(sku);


--
-- TOC entry 2227 (class 2606 OID 16712)
-- Name: cart_userid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY cart
    ADD CONSTRAINT cart_userid_fkey FOREIGN KEY (userid) REFERENCES shop_user(id);


--
-- TOC entry 2226 (class 2606 OID 16699)
-- Name: product_categoryid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY product
    ADD CONSTRAINT product_categoryid_fkey FOREIGN KEY (categoryid) REFERENCES category(id);


--
-- TOC entry 2230 (class 2606 OID 16735)
-- Name: purchase_productsku_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY purchase
    ADD CONSTRAINT purchase_productsku_fkey FOREIGN KEY (productsku) REFERENCES product(sku);


--
-- TOC entry 2229 (class 2606 OID 16730)
-- Name: purchase_userid_fkey; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY purchase
    ADD CONSTRAINT purchase_userid_fkey FOREIGN KEY (userid) REFERENCES shop_user(id);


--
-- TOC entry 2247 (class 0 OID 0)
-- Dependencies: 5
-- Name: public; Type: ACL; Schema: -; Owner: postgres
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM postgres;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


-- Completed on 2013-05-17 15:40:49 PDT

--
-- PostgreSQL database dump complete
--

